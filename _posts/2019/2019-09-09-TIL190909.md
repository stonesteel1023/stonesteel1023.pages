---
layout: post
date: 2019-09-09 10:53
title: "단위테스트 중에 private 메소드에 접근하려면"
tag: java
comments: true
---

# 단위 테스트 작성시 Private 접근자를 가진 메소드를 테스트하는 방법 정리

> 참고 : https://hyunto.github.io/2019/03/13/springframework-testing-private-method/

## Reflection 활용

### Reflection을 활용한 private static 메서드 단위 테스트

Relection으로 특정 클래스에서 테스트 할 메서드를 불러온 후 accessible 필드를 true로 설정합니다.
그리고 invoke() 메서드를 사용해 테스트 할 Private 메서드를 실행합니다.


```java
@Component
public class Validator {
	private static boolean checkLength(String str) {
		if (str.length() > 10) {
			return false;
		}
		return true;
	}
}


@RunWith(SpringRunner.class)
@SpringBootTest
public class ValidatorTest {
	@Autowired
	private Validator validator;

	@Test
	public void testCheckLength() throws Exception {
		Method checkLength = Validator.class.getDeclaredMethod("checkLength", String.class);
		checkLength.setAccessible(true);

		boolean result = (boolean)checkLength.invoke(checkLength, "abcdefghijklmn");
		assertFalse(result);

		result = (boolean)checkLength.invoke(checkLength, "12345");
		assertTrue(result);
	}
}
```
